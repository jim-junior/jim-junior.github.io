# Designing The Conveyor CI Pipeline Workflow

In CI/CD Systems, there is a concept of pipelines. Pipelines define the steps of how code changes throught the entire CI/CD process. Multiple systems like Github Actions, GitLab CI/CD, Jenkins etc all have this functionality of pipelines natively embeded within them, something that conveyor ci curently lacks. You could engineer a walkaround to implement your out pipeline-like functionality in conveyor but natively, this functionality doesnt exist and this is a serious downside existing within conveyor.

This got me thinking, how could I implement it. As you might guess from the name, Conveyor CI was insired by how a conveyor belt in an industry works. Take an example of a car manufacturing factory, the skeleton of the car moves along the conveyor belt and at each step there is a dedicated robot incharge of attaching a certain component to the car of carring out a certain function. By the time the skeleton reached the final stage, its a complete car. From the start I wanted to adopt this kind of concept as the core paradigm of Conveyor CI where by a resource(eg. source code) moves on a belt and at the end of the belt, all necessary actions are carried out.

With this in mind, I split the pipeline into components inorder to easily understand it adopting from components of a conveyor belt ie. Package, Conveyor Belt, and Peripheral equipements. In that I came up with the following:

- **Resource**: The resource is and internal object in conveyor that reporesents what is being acted through out the CI/CD process. Think of it as the Package on a conveyor belt. It can represent anything from source code, and application, a program etc.
- **Drivers**: Drivers are software components that carry out certain actions depending on the state defined in the Resource. Think of them as the Peripheral devices that act on a package as it moves along a conveyor belt. In this case the Packages are the Resources.

Notice i havent methioned a conponent that coressponds to the Conveyor belt. thats is because currently there was none, and to create one was where pipelines come in.

So currently in conveyor ci we have Resources and Drivers. They are generally mature enough as individual components and although you could create an entire CI/CD tool with these only, there are still some issues. Mainly is that there is not order of execution of drivers upon a Resource. This means that once a Resource even occurs, all drivers execute there correcponding actions whenever they recieve the event and they do this in no orderly fashion. This means it not possible to predict what action will occur at what point in the CI/CD process and you also cant create dependecy actions that depend on others being pre-ecexuted. An example is if you have a workflow whereby you compile your source code then upload the output program to a distributuin server, You might have two have twoo drivers, one for compiling and another for uploading. In the current implementation, these drivers will execute at once, yet the uploading driver should depend on the constraint that the compiling driver is done executing. I think you get where the issue now comes it.

To fix this we have to come up with a way to define a workflow that drivers must follow when carring out there executions, something that defines the steps and order that these divers will follow through out execution. Something to act as the conveyor belt. This is where Pipelines Come in. They will define the order of execution followed by drivers. The pipeline can be an object containing the configuration defining the order followed by drivers.

Pipelines also introduce more possibilies like shared context among driver executions, meaning, a pipeline can define some metadata that is shared and used across all the drivers that are executing upon an resource in that pipeline